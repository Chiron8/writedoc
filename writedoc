#!/bin/bash
# A fast way of creating and editing notes using neovim without defining a file path

# Function to display help message
usage() {
    echo "Usage: writedoc [-d DIRECTORY] FILENAME"
    echo "  -d, --directory    Directory where the file will be created (default: current directory)"
    echo "  FILENAME           Name of the markdown file (without extension)"
    exit 0
}

# Default directory to current working directory
DIRECTORY="./Documents"

# Parse command line options
while [[ "$#" -gt 0 ]]; do
    case $1 in
        -d|--directory) DIRECTORY="$2"; shift ;;  # Set directory to the next argument
        -h|--help) usage ;;  # Show help and exit
        *) FILENAME="$1" ;;  # The first non-option argument will be the filename
    esac
    shift
done

# Check if FILENAME is provided
if [ -z "$FILENAME" ]; then
    echo "Error: FILENAME is required."
    usage
fi

# Make sure the directory exists
if [ ! -d "$DIRECTORY" ]; then
    echo "Directory does not exist. Creating it now..."
    mkdir -p "$DIRECTORY"
fi

# Create the markdown file
FILEPATH="$DIRECTORY/$FILENAME.md"
echo "Creating File..."
echo "# $FILENAME" > "$FILEPATH"

# Open the file with nvim
echo "Opening file..."
nvim "$FILEPATH"

